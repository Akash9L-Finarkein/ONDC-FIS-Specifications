search:
  context: &context
    $ref: "./context.yaml"
  message: 
    intent:
      category: &category
        $ref: "./category.yaml"
          

on_search:
  context: *context
  message:
    catalog:
      providers:
        categories: *category
        items: &items
          $ref: './item.yaml'
        fulfillments: &fulfillments
          $ref: './fulfillment.yaml' 
           
select:
  context: *context
  message: 
    order: &order
      items: *items
      fulfillments: *fulfillments
      payments: &payment 
        $ref: './payment.yaml'  
on_select:
  context: *context
  message:
    order: *order
init:
  context: *context
  message:
    order: *order
on_init:
  context: *context
  message:
    order: *order
  
confirm:
  context: *context
  message: 
    order: *order
on_confirm:
  context: *context
  message:
    order: &order_document
      items: *items
      fulfillments: *fulfillments
      payments: *payment
      documents: &document
        $ref: './documents.yaml'
status:
  context: *context
on_status:
  context: *context
  message:
    order: *order
cancel:
  context: *context
on_cancel:
  context: *context
  message:
    order: *order
# track:
#   context: *context
# on_track:
#   context: *context
on_update:
  context: *context
  message: 
    order: *order_document